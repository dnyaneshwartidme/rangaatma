{% extends 'base.html' %} {% block title %}career {% endblock title %} {% block
body %}

<!-- Hero Section -->
<div
  class="container-fluid bg-primary py-5 bg-hero"
  style="margin-bottom: 90px"
>
  <div class="container py-5">
    <div class="row justify-content-start">
      <div class="col-lg-8 text-center text-lg-start">
        <h1 class="display-1 text-blue">Career</h1>
      </div>
    </div>
  </div>
</div>
<!-- Hiring Section -->
<div class="container-fluid mb-5">
  <div class="container">
    <!-- new design -->

    <div class="text-center mx-auto mb-5" style="max-width: 500px">
      <h4 class="display-5">We Are Hiring</h4>
      <div class="d-flex">
        <hr class="w-40 mx-auto" style="opacity: 1" />
        <img
          src="../static/images/sgnew.png"
          alt="VAPL"
          style="max-width: 45px"
        />
        <hr class="w-40 mx-auto" style="opacity: 1" />
      </div>
    </div>

    <div class="accordion mb-5" id="jobAccordion">
      {% for job in job_posts %}
      <div class="accordion-item mb-4">
        <h2 class="accordion-header" id="heading{{ loop.index }}">
          <button
            class="accordion-button collapsed"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapse{{ loop.index }}"
          >
            <div
              class="d-flex justify-content-between w-100 align-items-baseline"
            >
              <div>
                <div class="d-flex gap-2 mb-1 align-items-center">
                  <img
                    src="../static/images/career.png"
                    alt="career"
                    width="30px"
                  />
                  <h5>{{ job.job_title }}</h5>
                </div>
                <div class="d-flex careerInfoDiv flex-wrap gap-5">
                  <p class="mb-1">
                    <b>Qualification:</b> {{ job.qualification }}
                  </p>
                  <p class="mb-1"><b>Experience:</b> {{ job.experience }}</p>
                </div>
              </div>
            </div>
          </button>
        </h2>
        <div
          id="collapse{{ loop.index }}"
          class="accordion-collapse collapse"
          data-bs-parent="#jobAccordion"
        >
          <div class="accordion-body">
            <h5>Job Description</h5>
            <p>{{ job.job_description }}</p>
            <h5>Roles and Responsibilities</h5>
            <ul>
              <li>{{ job.responsibilities }}</li>
            </ul>
            <h5>Key Skills</h5>
            <ul>
              <li>{{ job.key_skills }}</li>
            </ul>
            <div
              class="careerbtn align-right"
              data-bs-toggle="modal"
              data-bs-target="#applyNowModal"
            >
              <div
                class="btn btn-primary"
                onclick="setJobPosition('{{ job.job_title }}')"
              >
                Apply For This Position
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Apply Now Modal -->
<div
  class="modal fade"
  id="applyNowModal"
  tabindex="-1"
  aria-labelledby="applyNowModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="applyNowModalLabel">Apply For Job</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form
        method="post"
        action="{{ url_for('career') }}"
        enctype="multipart/form-data"
      >
        <div class="modal-body">
          <input
            type="hidden"
            id="g-recaptcha-response"
            name="g-recaptcha-response"
          />
          <div class="mb-3">
            <label for="name" class="form-label">Your Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              required=""
            />
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email Address</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              required=""
            />
          </div>
          <div class="mb-3">
            <label for="number" class="form-label">Contact Number</label>
            <input
              type="tel"
              class="form-control"
              id="number"
              name="number"
              maxlength="10"
              required=""
            />
          </div>
          <div class="mb-3">
            <label for="skill" class="form-label">Your Skills</label>
            <textarea
              class="form-control"
              id="skill"
              name="skill"
              rows="3"
              required=""
            ></textarea>
          </div>
          <div class="mb-3">
            <label for="experience" class="form-label">Total Experience</label>
            <input
              type="text"
              class="form-control"
              id="experience"
              name="experience"
              required=""
            />
          </div>
          <div class="mb-3">
            <label for="job" class="form-label">Job Position</label>
            <input
              type="text"
              class="form-control"
              id="job"
              name="job"
              required=""
            />
          </div>
          <div class="mb-3">
            <label for="attachment" class="form-label">
              Upload Your Resume
              <span class="text-danger">(Accepted only 2MB)</span>
            </label>
            <input
              type="file"
              class="form-control"
              id="attachment"
              name="attachment"
              accept=".pdf,.doc,.docx"
              required=""
            />
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Close
          </button>
          <button type="submit" name="submit" class="btn btn-primary">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- Company Culture Section -->
<div class="bgheight">
  <div class="culturebg">
    <div class="cultureOverly">
      <div class="container-fluid mt-5">
        <div class="container">
          <div class="text-center mx-auto pt-5" style="max-width: 500px">
            <h4 class="display-5 text-white">Company’s Culture</h4>
            <div class="d-flex">
              <hr class="w-40 mx-auto text-white" style="opacity: 1" />
              <img
                src="{{ url_for('static', filename='images/sgnew.png') }}"
                alt="VAPL"
                width="50px"
              />
              <hr class="w-40 mx-auto text-white" style="opacity: 1" />
            </div>
          </div>

          <div class="companycultureBgDiv container">
            <div class="row">
              <p>{{ top_desc.replace('\n', '<br />')|safe }}</p>

              {% for item in points %}
              <div class="col-lg-6">
                <p>
                  <img
                    src="{{ url_for('static', filename='images/sgnew.png') }}"
                    alt="VAPL"
                    width="48px"
                  />
                  <b>{{ item.title }}</b> {{ item.description }}
                </p>
              </div>
              {% endfor %}

              <p>{{ bottom_desc.replace('\n', '<br />')|safe }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.getElementById("attachment").addEventListener("change", function () {
    const file = this.files[0];
    if (file && file.size > 2 * 1024 * 1024) {
      alert("❌ File size must be less than 2MB.");
      this.value = ""; // clear file input
    }
  });
</script>

{% endblock body %}
